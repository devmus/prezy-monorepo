// // Redeem (atomic)
// const r = await redeemGiftcardByCode(inputCode);
// if (!r.ok) {
//   // handle r.reason: "not_found" | "already_redeemed"
// } else {
//   const redeemedDoc = r.card;
//   // proceed (issue order fulfillment, notify merchant, etc.)
// }
